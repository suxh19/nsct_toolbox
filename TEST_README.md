# NSCT å·¥å…·ç®±æµ‹è¯•å¥—ä»¶

æœ¬ç›®å½•åŒ…å«äº†ç”¨äºéªŒè¯ MATLAB åˆ° Python ç¿»è¯‘æ­£ç¡®æ€§çš„æµ‹è¯•ä»£ç å’Œæ•°æ®ã€‚

## ç›®å½•ç»“æ„

```
nsct_toolbox/
â”œâ”€â”€ matlab_tests/          # æ‰€æœ‰ MATLAB æµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ test_step1_*.m    # ç¬¬ 1 æ­¥æµ‹è¯•ï¼šåº•å±‚æ“ä½œ
â”‚   â”œâ”€â”€ test_step2_*.m    # ç¬¬ 2 æ­¥æµ‹è¯•ï¼šå·ç§¯å’Œæ»¤æ³¢
â”‚   â”œâ”€â”€ test_step3_*.m    # ç¬¬ 3 æ­¥æµ‹è¯•ï¼šæ»¤æ³¢å™¨ç”Ÿæˆ
â”‚   â”œâ”€â”€ test_step4_*.m    # ç¬¬ 4 æ­¥æµ‹è¯•ï¼šæ ¸å¿ƒåˆ†è§£é‡æ„
â”‚   â””â”€â”€ test_step5_*.m    # ç¬¬ 5 æ­¥æµ‹è¯•ï¼šå®Œæ•´ NSCT
â”œâ”€â”€ test_data/             # ç”Ÿæˆçš„æµ‹è¯•æ•°æ®ï¼ˆ.mat æ–‡ä»¶ï¼‰
â”œâ”€â”€ run_step1_tests.m     # è¿è¡Œç¬¬ 1 æ­¥æ‰€æœ‰æµ‹è¯•
â”œâ”€â”€ run_step2_tests.m     # è¿è¡Œç¬¬ 2 æ­¥æ‰€æœ‰æµ‹è¯•
â”œâ”€â”€ run_step3_tests.m     # è¿è¡Œç¬¬ 3 æ­¥æ‰€æœ‰æµ‹è¯•
â”œâ”€â”€ run_step4_tests.m     # è¿è¡Œç¬¬ 4 æ­¥æ‰€æœ‰æµ‹è¯•
â”œâ”€â”€ run_step5_tests.m     # è¿è¡Œç¬¬ 5 æ­¥æ‰€æœ‰æµ‹è¯•
â””â”€â”€ run_all_tests.m       # è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆä¸»è„šæœ¬ï¼‰
```

## ä½¿ç”¨æ–¹æ³•

### åœ¨ MATLAB ä¸­ç”Ÿæˆæµ‹è¯•æ•°æ®

1. æ‰“å¼€ MATLAB
2. åˆ‡æ¢åˆ° `nsct_toolbox` ç›®å½•
3. è¿è¡Œä¸»æµ‹è¯•è„šæœ¬ï¼š

```matlab
run_all_tests
```

è¿™å°†ï¼š
- ä¾æ¬¡è¿è¡Œæ‰€æœ‰ 5 ä¸ªæ­¥éª¤çš„æµ‹è¯•
- åœ¨ `test_data/` ç›®å½•ä¸‹ç”Ÿæˆ `.mat` æ–‡ä»¶
- æ˜¾ç¤ºæµ‹è¯•æ‘˜è¦å’Œç»“æœ

### å•ç‹¬è¿è¡ŒæŸä¸ªæ­¥éª¤çš„æµ‹è¯•

å¦‚æœåªæƒ³æµ‹è¯•æŸä¸ªæ­¥éª¤ï¼š

```matlab
run_step1_tests  % åº•å±‚æ“ä½œ
run_step2_tests  % å·ç§¯å’Œæ»¤æ³¢
run_step3_tests  % æ»¤æ³¢å™¨ç”Ÿæˆ
run_step4_tests  % æ ¸å¿ƒåˆ†è§£é‡æ„
run_step5_tests  % å®Œæ•´ NSCT
```

## æµ‹è¯•æ­¥éª¤è¯´æ˜

### ç¬¬ 1 æ­¥ï¼šåº•å±‚å›¾åƒå’ŒçŸ©é˜µæ“ä½œ

æµ‹è¯•ä»¥ä¸‹å‡½æ•°ï¼š
- `extend2.m` - å›¾åƒè¾¹ç•Œæ‰©å±•
- `symext.m` - å¯¹ç§°è¾¹ç•Œæ‰©å±•
- `upsample2df.m` - æ»¤æ³¢å™¨ä¸Šé‡‡æ ·
- `modulate2.m` - çŸ©é˜µè°ƒåˆ¶
- `resampz.m` - çŸ©é˜µå‰ªåˆ‡é‡é‡‡æ ·

ç”Ÿæˆæ–‡ä»¶ï¼š
- `test_data/step1_extend2.mat`
- `test_data/step1_symext.mat`
- `test_data/step1_upsample2df.mat`
- `test_data/step1_modulate2.mat`
- `test_data/step1_resampz.mat`

### ç¬¬ 2 æ­¥ï¼šæ ¸å¿ƒå·ç§¯å’Œæ»¤æ³¢

æµ‹è¯•ä»¥ä¸‹åŠŸèƒ½ï¼š
- `efilter2.m` - å¸¦è¾¹ç•Œæ‰©å±•çš„å·ç§¯
- MEX æ–‡ä»¶åŠŸèƒ½ï¼ˆå¸¦è†¨èƒ€çš„å·ç§¯ï¼‰

ç”Ÿæˆæ–‡ä»¶ï¼š
- `test_data/step2_efilter2.mat`
- `test_data/step2_dilated_conv.mat`

### ç¬¬ 3 æ­¥ï¼šæ»¤æ³¢å™¨ç”Ÿæˆ

æµ‹è¯•ä»¥ä¸‹å‡½æ•°ï¼š
- `dmaxflat.m` - è±å½¢æœ€å¤§å¹³å¦æ»¤æ³¢å™¨
- `dfilters.m` - æ–¹å‘æ»¤æ³¢å™¨
- `atrousfilters.m` - é‡‘å­—å¡”æ»¤æ³¢å™¨
- `parafilters.m` - å¹³è¡Œå››è¾¹å½¢æ»¤æ³¢å™¨
- è¾…åŠ©å‡½æ•°ï¼ˆ`mctrans`, `ld2quin`, `qupz` ç­‰ï¼‰

ç”Ÿæˆæ–‡ä»¶ï¼š
- `test_data/step3_dmaxflat.mat`
- `test_data/step3_dfilters.mat`
- `test_data/step3_atrousfilters.mat`
- `test_data/step3_parafilters.mat`
- `test_data/step3_auxiliary_filters.mat`

### ç¬¬ 4 æ­¥ï¼šæ ¸å¿ƒåˆ†è§£ä¸é‡æ„

æµ‹è¯•ä»¥ä¸‹å‡½æ•°ï¼š
- `nssfbdec.m` / `nssfbrec.m` - åŒé€šé“æ»¤æ³¢å™¨ç»„
- `nsdfbdec.m` / `nsdfbrec.m` - æ–¹å‘æ»¤æ³¢å™¨ç»„
- `atrousdec.m` / `atrousrec.m` - é‡‘å­—å¡”åˆ†è§£

ç”Ÿæˆæ–‡ä»¶ï¼š
- `test_data/step4_core_decomposition.mat`

### ç¬¬ 5 æ­¥ï¼šå®Œæ•´ NSCT

æµ‹è¯•ä»¥ä¸‹å‡½æ•°ï¼š
- `nsctdec.m` - NSCT åˆ†è§£
- `nsctrec.m` - NSCT é‡æ„

ç”Ÿæˆæ–‡ä»¶ï¼š
- `test_data/step5_nsct_full.mat`

## Python ç¿»è¯‘å·¥ä½œæµç¨‹

1. **è¿è¡Œ MATLAB æµ‹è¯•**ï¼š
   ```matlab
   run_all_tests
   ```

2. **æŸ¥çœ‹ç”Ÿæˆçš„æ•°æ®**ï¼š
   æ£€æŸ¥ `test_data/` ç›®å½•ä¸‹çš„ `.mat` æ–‡ä»¶

3. **æŒ‰é¡ºåºç¿»è¯‘**ï¼š
   - ä»ç¬¬ 1 æ­¥å¼€å§‹ï¼ˆåº•å±‚æ“ä½œï¼‰
   - ç¿»è¯‘å®Œæ¯ä¸ªå‡½æ•°åï¼Œä½¿ç”¨å¯¹åº”çš„ `.mat` æ–‡ä»¶éªŒè¯
   - ç¡®ä¿ Python å®ç°çš„è¾“å‡ºä¸ MATLAB è¾“å‡ºä¸€è‡´ï¼ˆè¯¯å·®åœ¨å¯æ¥å—èŒƒå›´å†…ï¼‰

4. **éªŒè¯æ–¹æ³•**ï¼š
   ```python
   import scipy.io as sio
   import numpy as np
   
   # åŠ è½½ MATLAB æµ‹è¯•æ•°æ®
   data = sio.loadmat('test_data/step1_extend2.mat')
   
   # è·å–è¾“å…¥å’ŒæœŸæœ›è¾“å‡º
   test_matrix = data['test_matrix']
   expected_result = data['result1']
   
   # è¿è¡Œä½ çš„ Python å®ç°
   result = your_extend2_function(test_matrix, 1, 1, 1, 1, 'per')
   
   # æ¯”è¾ƒç»“æœ
   error = np.max(np.abs(result - expected_result))
   print(f'æœ€å¤§è¯¯å·®: {error}')
   ```

5. **è¯¯å·®æ ‡å‡†**ï¼š
   - åº•å±‚æ“ä½œï¼šè¯¯å·®åº”è¯¥ä¸º 0 æˆ–æ¥è¿‘æœºå™¨ç²¾åº¦ï¼ˆ< 1e-14ï¼‰
   - æµ®ç‚¹è¿ç®—ï¼šè¯¯å·®åº”è¯¥ < 1e-10
   - å®Œæ•´ NSCTï¼šé‡æ„è¯¯å·®åº”è¯¥ < 1e-10

## æ³¨æ„äº‹é¡¹

- æ‰€æœ‰æµ‹è¯•éƒ½å‡è®¾ä½ åœ¨ `nsct_toolbox` ç›®å½•ä¸‹è¿è¡Œ
- æµ‹è¯•æ•°æ®æ–‡ä»¶å¯èƒ½ä¼šæ¯”è¾ƒå¤§ï¼ˆç‰¹åˆ«æ˜¯ step5ï¼‰
- å¦‚æœæŸäº›è¾…åŠ©å‡½æ•°ï¼ˆå¦‚ `wfilters`, `ldfilter`ï¼‰ä¸å¯ç”¨ï¼Œæµ‹è¯•ä¼šè·³è¿‡å®ƒä»¬
- MEX æ–‡ä»¶å¦‚æœæœªç¼–è¯‘ï¼Œä¼šä½¿ç”¨ç­‰æ•ˆçš„ MATLAB ä»£ç 

## æ•…éšœæ’é™¤

### é—®é¢˜ï¼šMEX æ–‡ä»¶æœªç¼–è¯‘

å¦‚æœçœ‹åˆ° "atrousc MEX æ–‡ä»¶æœªç¼–è¯‘" çš„è­¦å‘Šï¼Œä¸ç”¨æ‹…å¿ƒã€‚æµ‹è¯•ä¼šä½¿ç”¨ç­‰æ•ˆçš„ MATLAB å®ç°ã€‚è¿™ä¸ä¼šå½±å“æµ‹è¯•æ•°æ®çš„æ­£ç¡®æ€§ã€‚

### é—®é¢˜ï¼šå†…å­˜ä¸è¶³

å¦‚æœæµ‹è¯• step5 æ—¶å†…å­˜ä¸è¶³ï¼Œå¯ä»¥ï¼š
1. å‡å°æµ‹è¯•å›¾åƒå°ºå¯¸
2. å‡å°‘åˆ†è§£çº§æ•°
3. å•ç‹¬è¿è¡Œè¾ƒå°çš„æµ‹è¯•

### é—®é¢˜ï¼šè·¯å¾„é”™è¯¯

ç¡®ä¿ï¼š
1. å½“å‰ç›®å½•æ˜¯ `nsct_toolbox`
2. `matlab_tests` å’Œ `test_data` ç›®å½•å­˜åœ¨
3. æ‰€æœ‰ `.m` æ–‡ä»¶éƒ½åœ¨æ­£ç¡®çš„ä½ç½®

## è”ç³»ä¸æ”¯æŒ

å¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. MATLAB ç‰ˆæœ¬æ˜¯å¦å…¼å®¹
2. æ‰€æœ‰å¿…éœ€çš„å·¥å…·ç®±æ˜¯å¦å·²å®‰è£…
3. æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®

---

**ç¥ç¿»è¯‘é¡ºåˆ©ï¼** ğŸ‰
